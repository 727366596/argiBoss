<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
	<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
	<title>启动页</title>
	<style media="screen">
		html,
		body {
			width: 100%;
			height: 100%;
			background: #fdfdfd;
			overflow: hidden;
			margin: 0;
			padding: 0;
		}

		.box {
			position: absolute;
			top: 30px;
			right: 10px;
			background: #848484;
			width: 66px;
			line-height: 24px;
			font-size: 15px;
			text-align: center;
			border-radius: 85px;
			color: #fff;
		}

		span {
			display: inline-block;
		}

		img {
			width: 100%;
			height: 100%;
		}
	</style>
	<script type="text/javascript" src="../../script/common/rem.js"></script>
	<script type="text/javascript" src="../../script/common/api.js"></script>
	<script type="text/javascript" src="../../script/common/jquery.min.js"></script>
</head>

<body>
	<img src="" alt="">
	<div class="box">
		<span style="margin-right:5px;">跳过</span><span class="jump">3</span>
	</div>

</body>

<script type="text/javascript">
	apiready = function() {
		api.parseTapmode();
		api.setFullScreen({
			fullScreen: true
		});
		var pictureUrl = api.pageParam.pictureUrl;
		var title = api.pageParam.title;
		var url = api.pageParam.url;

		advImg(pictureUrl,title,url);
		api.addEventListener({
			name: 'openLogin'
		}, function(ret, err) {
			if (ret) {
				jumpSlogin()
			}
		});
		api.addEventListener({
			name: 'keyback'
		}, function(ret, err) {
			if (ret) {
				return;
			}
		});

	};
	var time

	function advImg(pictureUrl,title,url) {
		$('img').attr('src', pictureUrl)
		if(url!==''){
			$('img').on('click', function() {
				clearInterval(time);
				jumpPage(title, url);
			})
		};
		setTimeout(function() {
			var number = 3;
			time = setInterval(function() {
				number--;
				if (number > 0) {
					$('.jump').text(number)
				} else {
					clearInterval(time)
					jumpLogin()
				}
			}, 1000)
		}, 2000);
	}


	function jumpLogin() {
		api.openWin({
			name: "login_new",
			url: "widget://html/login/login_new.html",
			reload: true,
			slidBackEnabled: false,
			animation: {
				type: "movein", //动画类型（详见动画类型常量）
				subType: "from_right", //动画子类型（详见动画子类型常量）
				duration: 400 //动画过渡时间，默认300毫秒
			}
		});
	}

	$('.box').on('click', jumpLogin)

	function jumpPage(title, url) {
		api.openWin({
			name: 'startPage_win',
			url: './startPage.html',
			pageParam: {
				title: title,
				url: url
			},
			animation: {
				type: "movein", //动画类型（详见动画类型常量）
				subType: "from_right", //动画子类型（详见动画子类型常量）
				duration: 400 //动画过渡时间，默认300毫秒
			}
		});
		clearInterval(time)
	}
</script>

</html>
